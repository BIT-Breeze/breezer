<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="post">

	<select id="selectPost" parameterType="postvo" resultType="postvo">
		<![CDATA[
		select *
		  from TB_POST
		 where userId = #{userId }
		   and tourIdx = #{tourIdx}
		   and idx = #{idx}
		]]>
	</select>

	<insert id="insert" parameterType="postvo">
		<![CDATA[
	  	INSERT INTO TB_POST (userId, postDateTime, tripDateTime, photo, content, location, locale, lat, lot, tourIdx, category, price, score)
		VALUES (
				#{userId },
				SYSDATE(),
				#{tripDateTime },
				#{photo },
				#{content },
				#{location },
				(select code 
				   from TB_COUNTRY 
				  where name = #{locale }),
				#{lat},
				#{lot},
				#{tourIdx },
				#{category },
				#{price },
				#{score }
				)
		]]>	
	</insert>
	
</mapper>
